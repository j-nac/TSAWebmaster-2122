var cleanup;function toggleNavbar(){let e=$(".navbox:first"),t=$("#menu-icon");"none"==e.css("display")?(e.css("display","flex"),t.text("close")):(e.addClass("fadingnav"),t.text("menu"),e.on("animationend",()=>{e.removeClass("fadingnav"),e.css("display","none"),e.off("animationend")}))}function insert_page(e){let t=document.getElementById("page"),n=document.createElement("div");n.innerHTML=e;for(let e=0;e<t.children.length-1;e++)t.children[e].remove();t.children[0].classList.add("oldpage"),n.classList.add("newpage"),n.classList.add("pagein"),t.appendChild(n),$(".oldpage:first").on("transitionend",()=>{$(".oldpage:first").remove()}),document.querySelectorAll("button.linkme").forEach(e=>{e.onclick=redirect})}function redirect(){let navElement=$(".navbox:first");"none"!=navElement.css("display")&&toggleNavbar(),window.history.pushState("Arch","",this.getAttribute("link")),window.scrollTo(0,0),cleanup();var request=new XMLHttpRequest;request.js=this.getAttribute("js"),request.onload=function(){insert_page(this.responseText),eval(this.js)},request.open("STATIC",this.getAttribute("link")),request.send()}cleanup||(cleanup=(()=>{})),document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("button.linkme").forEach(e=>{e.onclick=redirect})}),$(document).on("submit","#newsletter-form",function(e){e.preventDefault(),$.ajax({type:"POST",url:"",data:{email:$("#newsletter-email-box").val(),csrf_token:$("#csrf_token").val()},success:function(){$("html, body").animate({scrollTop:0},"slow"),$("#newsletter-email-box").val("")}})}),ScrollReveal().reveal(".reveal",{duration:1500,reset:!0}),document.addEventListener("keyup",e=>{"Escape"==e.code&&toggleNavbar()});var target=16566588e5,inter;function countdown(){var e=[Math.max(0,(target-Date.now())/1e3)];for(let[t,n]of[60,60,24].entries())e.push(e[t]/n),e[t]%=n;$("#day-cd").css("width",(e[3]/365*100).toString()+"%"),$("#hr-cd").css("width",(e[2]/24*100).toString()+"%"),$("#min-cd").css("width",(e[1]/60*100).toString()+"%"),$("#sec-cd").css("width",(e[0]/60*100).toString()+"%"),$("#days").html(parseInt(e[3])),$("#hrs").html(parseInt(e[2])),$("#mins").html(parseInt(e[1])),$("#secs").html(parseInt(e[0]))}function check_artist(){window.history.pushState("Arch","","/artists"),cleanup();var e=new XMLHttpRequest;e.id=this.getAttribute("target"),e.onload=function(){insert_page(this.responseText),document.getElementById(this.id).scrollIntoView(!0)},e.open("STATIC","/artists"),e.send()}function loadhome(){document.querySelectorAll("button.artist-card").forEach(e=>{e.onclick=check_artist}),cleanup=(()=>{console.log("sweeping"),clearInterval(inter)}),inter=setInterval(countdown,500);var e=document.getElementsByClassName("countdown-background");new simpleParallax(e,{delay:.3,scale:1.5,transition:"cubic-bezier(0,0,0,1)"})}function get_cart(){current=document.cookie.match(/(?<=cart=)\{[^;]*?\}/);try{if(null==current)throw"";var e=JSON.parse(current)}catch(t){e={}}return e}function set_cart(e){exp=new Date,exp.setTime(exp.getTime()+6048e5),console.log(`cart=${JSON.stringify(e)}; expires=${exp.toUTCString()}; path=/`),document.cookie=`cart=${JSON.stringify(e)}; expires=${exp.toUTCString()}; path=/`}function add_item(){let e=document.getElementsByClassName("itempage");e.length&&(e=e[0].getAttribute("itemid"),cart=get_cart(),cart[e]=(parseInt(cart[e])||0)+Math.max(parseInt($("#itemquan").val())||1,1),exp=new Date,exp.setTime(exp.getTime()+6048e5),document.cookie=`cart=${JSON.stringify(cart)}; expires=${exp.toUTCString()}; path=/`)}function changeItem(e,t){cart=get_cart(),cart[e]=(parseInt(cart[e])||0)+t,cart[e]<=0?(delete cart[e],$(`#item${e}cont`).remove()):document.getElementById("item"+e).innerHTML=cart[e],document.getElementById("cart").children||$("#cart").html("You haven't bought anything yet! :("),set_cart(cart)}function mason(){var e=$(".grid").masonry({isFitWidth:!0});e.imagesLoaded().progress(function(){e.masonry("layout")})}function loadstore(){Promise.all(Array.from(document.images).filter(e=>!e.complete).map(e=>new Promise(t=>{e.onload=e.onerror=t}))).then(()=>{mason()}),document.querySelectorAll("button.store-card").forEach(e=>{e.onclick=redirect}),document.getElementById("searchbox").onsubmit=function(){return $.ajax({url:"/store?"+$("#searchbox").serializeArray().map(e=>e.name+"="+e.value).join("&"),type:"STATIC",success:function(e){insert_page(e),loadstore()}}),!1}}